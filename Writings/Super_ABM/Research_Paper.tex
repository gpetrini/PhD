% Created 2021-07-16 sex 17:48
% Intended LaTeX compiler: pdflatex
\documentclass{SelfArx}
  \usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{booktabs}
\renewcommand{\arraystretch}{1.1} % Unclear
\usepackage{graphicx,multirow,lscape,longtable,supertabular}
\usepackage{float}
\usepackage{amsmath}
\usepackage{csquotes}
\setlength{\columnsep}{0.55cm} % Distance between the two columns of text
\setlength{\fboxrule}{0.75pt} % Width of the border around the abstract
\definecolor{color1}{RGB}{0,0,90} % Color of the article title and sections
\definecolor{color2}{RGB}{0,20,20} % Color of the boxes behind the abstract and headings
\usepackage[english]{babel} % Specify a different language here - english by default
\usepackage{lipsum} % Required to insert dummy text. To be removed otherwise
\setlength{\columnsep}{0.55cm} % Distance between the two columns of text
\setlength{\fboxrule}{0.75pt} % Width of the border around the abstract
\usepackage[backend=biber,%
style = abnt,%
noslsn, %
isbn = false,
url = false,
extrayear, %
uniquename=init,%
giveninits, %
justify, %
sccite,%
scbib, %
sorting=nyt,
% mergedate=compact,
natbib=true,
repeattitles, %
maxcitenames=3]{biblatex}
\AtEveryBibitem{%
\clearfield{urlyear}
\clearfield{urlmonth}
\clearfield{note}
\clearfield{issn} % Remove issn
\clearfield{doi} % Remove doi
\ifentrytype{online}{}{% Remove url except for @online
\clearfield{url}
}
}
\addbibresource{./refs.bib}
\date{}
\title{Sraffian submultiplier model\\\medskip
\large an Stock-Flow consistent Agent Based Sraffian supermultiplier model}
\begin{document}

\JournalInfo{Draft - \today} % Journal information
\Archive{Please do not quote} % Additional notes (e.g. copyright, DOI, review/research article)

\Authors{Gabriel Petrini\textsuperscript{1}*, Lucas Teixeira\textsuperscript{2}, Ivette Luna\textsuperscript{2}, Ítalo Pedrosa\textsuperscript{3}} % Authors
\affiliation{\textsuperscript{1}\textit{PhD Student at Unicamp/Brazil}} % Author affiliation
\affiliation{\textsuperscript{2}\textit{Professor at Unicamp/Brazil}} % Author affiliation
\affiliation{\textsuperscript{3}\textit{Professor at UFRJ/Brazil}} % Author affiliation
\affiliation{*\textbf{Corresponding author}: gpetrinidasilveira@gmail.com} % Corresponding author

\Keywords{Keyword1 --- Keyword2 --- Keyword3} % Keywords - if you don't want any simply remove all the text between the curly brackets
\newcommand{\keywordname}{Keywords} % Defines the keywords heading name

\Abstract{This is an example of an Abstract}

\flushbottom % Makes all text pages the same height
\maketitle % Print the title and abstract box
\thispagestyle{empty} % Removes page numbering from the first page

\section{Introduction}
\label{sec:orgee2bb40}
There is a relative consensus in the demand-led macroeconomic growth literature that non-residential investment is, at the macroeconomic level, partially induced by income.
Authors inspired by Sraffian supermultiplier model, on the other hand, state that non-residential investment is fully-induced and is described by the capital adjusment principle.
As a consequence, this model predict a positive correlational relation between investment share and economic growth while capacity utilization rate is trend-stationary in the long-run.
Recently, there are empirical support for this results () while other are still in debate.
Besides this econometric validation, it is unclear how this upper-level property of non-residential investment emerge from lower level decisions.

There is a long strand of agent based models that emphasizes other stylized facts regarding non-residential investment.
Just to name a few of them, there is the relevance of technological progress and innovation, market structure and competition, firms' long-term survival condition among others \cite{caballero_1999_Aggregate}.
One of the properties reported by this literature is the emergence of non-residential investment lumpiness.
In summary, firms expanding at different levels coexist, which implies the persistence of heterogeneity.
These results suggests that there are non-trivial mesoeconomic level mechanisms that explain how microeconomic behavior of the firm generates aggregate pattern of non-residential investment.


Based on this collection of empirical results, this paper intend to investigate which microeconomic-level assumptions reproduce the macroeconomic properties of fully-induced non-residential investment reported by SSM model.
In order to do so, some additional steps are required to moving from a standard macroconomic Sraffian supermultiplier model to a microeconomic founded.
The main contribution of this paper is to evaluate this microeconomics path towards an agent based SSM model.
Thus, the article is organized as follows.
Section \ref{sec:empirical:ch_super} reviews some stylized facts reported by the Sraffian supermultiplier framework, enhancing the list already mapped by AB literature.
Section \ref{sec:model:ch_super} presents a parsimonious Stock-Flow consistent model with heterogeneous firms.
The core mechanism are two switching procedures regarding expectations (Section \ref{sec:switching_expec}) and investment decisions (Section \ref{sec:switching_invest}).
Additional, this section also show the required assumptions to convert the SSM model into a firm-level version.
Next, on Section \ref{sec:validation:ch_super}, the baseline model is validated using a only-one-firm (oof) version in which investment is equal to the SSM aggregated version with adaptatinve expectations as a contrafactual.
Section \ref{sec:experiments:ch_super} presents the experiments results in which the two switching mechanisms are triggered.
Finally, Section \ref{sec:conclusion:ch_super} concludes the paper.


\section{Empirical motivation}
\label{sec:empirical_ch_super}
Estrutura de tópicos:

\begin{itemize}
\item Fatos estilizados sobre investimento induzido
\item Evidências empíricas da literatura a partir do SSM
\item Reapresentar tabela de fatos estilizados de DOSI expandida com os do SSM
\end{itemize}

\include{./tabs/Stylized_Facts.tex}

\section{The model}
\label{sec:model:ch_super}
The standard Sraffian supermultiplier macroeconomic model (which will refer as SSM) present by \textcite{serrano_1995_Long,bortis_1996_Structural} attributes a prominent role for non-capacitiy creating autonomous expenditures.
At odds with most Keynesian demand-led growth models (CITAR), non-residential investment is considered fully induced by income (\(Y\)), following the capital adjustment principle.
In other words, firms' investment (\(I_{F}\)) reacts to discrepancies between effective and normal capacitiy utilization rate (\(u\) and \(u_{N}\) respectively).
Formally, we can presents this mechanism following \textcite{serrano_2017_Sraffian}:
\begin{latex}
\begin{equation}
\label{Ch_super_EQ_inv_super_macro}
I_{F} = h_{F}\cdot Y
\end{equation}
\begin{equation}
\Delta h_{F} = \beta_{u}(u - u_{n})\cdot h_{F,t-1}
\end{equation}
\end{latex}
where \(h_{F}\) is the marginal propensity to invest (or investment share) while \(\beta_{u}\) is an adjustment parameter.
Since firms' investment is fully induced by income, this is not the driver of economic growth.
In the long-run\footnote{More precisely, in the fully adjusted position as described in \cite{freitas_2015_Growth}.}, when the adjutsment procedure ceases (\(u = u_{N}, \Delta h_{F} = 0\)), only changes on autonomous expenditures growth rate (\(g_{Z}\)) will have persistence effects on GDP growth rate (\(g\)):
\begin{latex}
\begin{equation}
u = u_{N} \Leftrightarrow \Delta h_{F} = 0 \Leftrightarrow g = g_{Z}
\end{equation}
\end{latex}

Tables \ref{Tab_exp_resul_trans:ch_super} and \ref{Tab_exp_resul_long:ch_super} compare the effects of some shocks to the baseline level according to the SSM model\footnote{More recently, SSM model has been present for the neo-Kaleckian audience after \textcite{allain_2015_Tacklin,lavoie_2016_Convergence} (hereafter refered as neo-Kaleckian supermultiplier). Besides the divergences in the specification of the investment function, the results as qualitatively the same as those reported in Tables \ref{Tab_exp_resul_trans:ch_super} and \ref{Tab_exp_resul_long:ch_super}. For a detailed discussion of the persistence of a autonomous component in the neo-Kaleckian supermultiplier model, see \cite{fagundes_2017_Role}.}.
For instance, changes on functional income distribution will have only temporarily effects on economic growth.
Additionally, as already discussed on Section \ref{sec:empirical_ch_super}, this model predicts a positive relation between investment share and economic growth.
However, this is a completely aggregated model, so the effect of those shocks on some firm-level variables is unclear.
For example, an increase on autonomous expenditures growth rate or on wage share could have some persistent consequences for the market structure (\emph{e.g.} firms entry and exit or market-share).



\begin{table*}\centering
\caption{Expected results accordingly to Standard Sraffian supermultiplier model: transience compared to baseline}
\label{Tab_exp_resul_trans:ch_super}
\resizebox{\textwidth}{!}{%
\begin{center}
\begin{tabular}{lcccccc}
\hline
\hline
\textbf{Shock} & \textbf{Economic growth} & \textbf{Capacity utilization} & \textbf{Investment share} & \textbf{Firms indebtedness} & \textbf{Firms entry and exit} & \textbf{Market share}\\
\hline
Autonomous growth rate increase & \(+\) & \(+\) & \(+\) & \(-\) & ? & ?\\
Wage share increase & \(+\) & \(+\) & \(+\) &  & ? & ?\\
Higher profit distribution rate &  &  &  & \(+\) & ? & ?\\
Higher policy rate & \(-\) & \(-\) & \(-\) & \(+\) & ? & \\
Market price increase &  &  &  &  & ? & ?\\
Higher expectational persistence (\(\delta\)) & ? & ? & ? & ? & ? & ?\\
\hline
\hline
\end{tabular}
\end{center}
%
}
\caption*{\textbf{Source:} Authors' elaboration}
\end{table*}



\begin{table*}\centering
\caption{Expected results accordingly to Standard Sraffian supermultiplier model: fulled adjusted compared to baseline}
\label{Tab_exp_resul_long:ch_super}
\resizebox{\textwidth}{!}{%
\begin{center}
\begin{tabular}{lcccccc}
\hline
\hline
\textbf{Shock} & \textbf{Economic growth} & \textbf{Capacity utilization} & \textbf{Investment share} & \textbf{Firms indebtedness} & \textbf{Firms entry and exit} & \textbf{Market share}\\
\hline
Autonomous growth rate increase & \(+\) & \(0\) & \(+\) & \(-\) & ? & ?\\
Wage share increase & \(0\) & \(0\) & \(0\) &  & ? & ?\\
Higher profit distribution rate & \(0\) & \(0\) & \(0\) & \(+\) & ? & ?\\
Higher policy rate & \(0\) & \(0\) & \(0\) & \(+\) & ? & \\
Market price increase &  &  &  &  & ? & ?\\
Higher expectational persistence (\(\delta\)) & ? & ? & ? & ? & ? & ?\\
\hline
\hline
\end{tabular}
\end{center}
%
}
\caption*{\textbf{Source:} Authors' elaboration}
\end{table*}



The previous theoretical gaps exist because the standard SSM has a aggregate nature, so some additional steps are required to answer them.
For instance, at the firm-level the market-share is more relevant than the aggregate investment share because other firms also dispute for this market.
In a multi-sectorial model, the sectorial growth and its connections with others may be more significant than the GDP growth rate from a firm perspective.
Those simple, but necessary, modifications show some issues that arise when dealing with less aggregated models.
This paper is a first step in this direction.


In order to keep the model as simple as possible, we assume an economy composed by only one sector to prevent additional difficulties regarding inter-sectorial dynamics.
Thus, we can rearrange Equation \ref{Ch_super_EQ_inv_super_macro} in terms of a firm \(f\) market-share (\(ms_{f}\)):
\begin{latex}
\begin{equation}
\label{Ch_super_EQ_inv_super_micro}
I_{f} = h_{f}\cdot \left(ms_{f}\cdot\sum_{f=1}^{F}Y_{f}\right)
\end{equation}
\end{latex}
in which \(h_{f}\) is the firm-level equivalent marginal propensity to invest and \(Y_{f}\) is its production level.
The economic intuition in Equation \ref{Ch_super_EQ_inv_super_micro} is to specify each firm's investment in terms of the available share (\(ms_{f}\)) of the market (\(\sum_{f=1}^{F}Y_{f} = Y_{F}\)).
Consequently, firm's investment levels must also change accordingly to its expected market-share (\(ms^{e}_{f}\)):
\begin{latex}
\begin{equation}
\Delta I_{f} = \Delta h_{f}\cdot(ms^{e}_{f}\cdot Y_{F}) + h_{f}\cdot(\Delta ms^{e}_{f}\cdot Y_{F}) + h_{f}\cdot (ms^{e}_{f}\cdot \Delta Y_{F})
\end{equation}
\end{latex}

Besides market-share evolution, other issues regarding firm's heterogeinity emerges.
For instance, optimistic and pessimist firms may coexist each time.
Additionally, firms may also follow different investment procedures which could have some non-trivial emergence properties.
Here is where the advantages of Agent Based (AB) Modeling within the Stock-Flow consistent (SFC) framework (AB-SFC) takes place.
Based on this methodological approach, it is possible to investigate the emergence of macroeconomic properties from the microeconomic-level interactions while the connections between the financial and real side of the economic is fully specified.
Thus, we can evaluate which SSM macroeconomic results hold in the presence of heterogeneous firms with different expectational and investment procedures.
As far as we know, this is the first attempt to extend the SSM model to a firm-level perspective.

In the following subsections, we present the conceptual model that will be simulated later.
This model represent an economy as simple as possible with heterogeneous firms while all the other institutional sectors are aggregated.
At odds with conventional AB literature, we assume no thecnological progress to keep it simple\footnote{For an detailed description of innovations and thecnological change in AB models, see DOSI whom we refer to as a benchmark model.}.
For simplicity, there is no labor supply restriction, government nor external sector.
As a consequence of the previous assumptions, the economy is composed by \(N\) homogeneous households and \(F\) heterogeneous firms\footnote{Aggregates variables will be represented by subscript \(N\) for households and \(F\) for firms.}.
All other auxiliary assumptions -- which will be described latter in this section -- will follow AB literature as long as it do not generate incompatibilities with SSM macroeconomic closure.
The next subsection presents the model timeline of events.

\subsection{Sequence of events}
\label{sec:org95b1dd0}



\subsection{Production and distribution}
\label{sec:org9b2e2e1}


\subsubsection{Firms production plans}
\label{sec:org5acce5a}

Each firm (\(f\)) investment plan (\(Y_{f,t}\), Equation \ref{Ch_super_EQ_Yf}) is defined accordingly to its expected real sales level (\(S^{e}_{f,t}\)) and a desired inventories to sales ratio \((\iota^{T} \in [0,1])\) -- exogenous defined and equal across firms -- to attend unexpected demand boosts as usual in \(K+S\) models.

\begin{latex}
\begin{equation}
\label{Ch_super_EQ_Yf}
Y_{f,t} = (1+\iota^{T})\cdot S^{e}_{f,t} - INV_{f,t-1}
\end{equation}
\end{latex}
in which \(INV_{f,t-1}\) is the firm's inventories.
In baseline scenario, we assume naïve expectational procedure in which expected sales level is equal to its lagged value.
Alternatives expectational procedures will be discussed in section \ref{sec:switching}.
After defining an production plan, firms calculates its desired capacitiy utilization rate (\(u^{d}_{f}\), Equation) as follows:

\begin{latex}
\begin{equation}
u^{d}_{f} = \max\left[ 0, \min\left[ \frac{Y_{f,t}}{Y_{f,t}^{FC}}, 1 \right] \right]
\end{equation}
\end{latex}
in which \(Y_{f,t}^{FC}\) is the firm's current output at the full capacity.
Since we assume no labor restriction, full capacity output is define by its existing capital stock (\(K_{f,t-1}\)) given a maximum capital to output ratio (\(\nu\)) constant, exogenous and equal across firms:

\begin{latex}
\begin{equation}
Y_{f,t}^{FC} = \frac{K_{f,t-1}}{\nu}
\end{equation}
\end{latex}
Consequently, current firm's capacity utilization ratio is constrained do be equal or less than one since production is limited by physical capital.



\subsubsection{Capital stock}
\label{sec:orgad3f185}


Since there is no thecnological progress nor innovation in the current version of this model, firms' capital stock only differs according to it lifetime (\(\kappa\)).
Consequently, total capital stock is defined as the sum of different capital good vintage (\(k_{f}\)) as follows:

\begin{latex}
\begin{equation}
K_{f} = \sum_{j=1}^{\kappa < \infty} k_{f,t-j}
\end{equation}
\end{latex}
For simplicity, we assume no use depreciation, so each capital good will be replaced only if achieve its maximum lifetime.

\subsubsection{Labor demand and wage bill}
\label{sec:org92dab51}

In order to produce, firms use a Leontieff-type technology with a fixed combination between labor and physical capital.
Given no a fixed labor productivity equally defined across workers, labor demand is a function (\(N^{d}_{f,t}\)) of each firm production plan at current capacity utilization level:

\begin{latex}
\begin{equation}
N^{d}_{f,t} = u_{f,t}\cdot Y^{FC}_{f,t}
\end{equation}
\end{latex}

Since our main purpose with this model is to evaluate emergence of firm's behavior, we assume single nominal wage for all workers (\(w_{t}\)) exogenously defined.
Thus, each firm wage bill (\(W_{f}\)) is:
\begin{latex}
\begin{equation}
W_{f,t} = N^{d}\cdot w_{f,t}
\end{equation}
\end{latex}
In order to prevent asymptotic null induced consumption levels, we assume that at each time nominal wage is updated accordingly to previous inflation rate (\(\pi_{t-t}\)) which is the market-share weighted market price mean (Equation \ref{Ch_super_EQ_Infla})

\begin{latex}
\begin{equation}
w_{t} = w_{t-1}\cdot(1+\pi_{t-1})
\end{equation}
\end{latex}
\begin{latex}
\begin{equation}
\label{Ch_super_EQ_Infla}
\pi_{t} = \sum_{f=1}^{F} ms_{f,t}\cdot p_{f,t}
\end{equation}
\end{latex}
in which \(ms_{f}\) and \(p_{f,t}\) stands for firm's \(f\) market share and price respectively.



\subsubsection{Pricing}
\label{sec:org21e220e}

We assume a simple pricing mechanism as possible which is defined as a mark-up (\(\theta_{f}\)) over direct unit labor costs (in this case, \(w_{t}\)):
\begin{latex}
\begin{equation}
p_{f,t} = (1+\theta_{f})\cdot w_{t}
\end{equation}
\end{latex}
At odds with \(K+S\) model, and a a result of our simplifying assumptions, there is no need to specify a mark-up law of motion equation\footnote{This is the case for \(K+S\) models because unit labor costs are not under firms strict control. Once we assume no technological progress nor innovation, uncertainty regarding labor productivity level is vanished.}.
As we will further explore in section \ref{sec:switching}, expected market-share levels play a prominent role in investment decision and not in pricing as usual.



\subsubsection{Household demand}
\label{sec:orgac29109}


In order to investigate the consequences of heterogeneous investment decisions in a Sraffian supermultiplier friendly framework, we a assume that household's consumption (\(C_{N}\)) is composed both by an induced (\(W_{N,t}\)) and by an autonomous component (\(Z_{t}\))\footnote{As discussed before, there is a multitude of non-capacitiy creating autonomous expenditures. Autonomous households consumption component was selected only to reduce the complexity of this model.}\textsuperscript{,}\,\footnote{Following \textcite{serrano_1995_Long}, we consider \(Z_{t}\) as an non-capacitiy creating autonomous expenditure because it does not depends on firms' production decisions. Additionally, since banking credit is endogenous, consumption loans does not affect credit availability for other sectors.}:

\begin{latex}
\begin{equation}
C_{N} = \frac{c_{w}\cdot W_{N,t} + c_{p}\cdot FD_{t} + Z_{t}}{p_{f}}
\end{equation}
\end{latex}
in which \(1 \geq c_{w} > c_{p} > 0\) are households marginal propensity to consume out of wages and out of distributed profits (\(FD\), discussed in Section \ref{sec:banking}) respectively while autonomous expenditure is given by its exogenously defined growth rate (\(g_{Z}\)):
\begin{latex}
\begin{equation}
Z_{t} = (1+g_{Z})\cdot Z_{t-1}
\end{equation}
\end{latex}
in which is financed either by financial wealth and by banking credit.

Since we assume no households heterogeinity, consumption loans restriction has no economic meaning at the aggregate level.
Differently from firms, we impose that households are not credit constrained\footnote{We are aware of the simplifications of these assumption, but our main propose here is to elaborate a simple model to discuss heterogeneity in the Sraffian Supermultiplier macroeconomic model.}.
Implicitly, we assume that banking evaluation of households default probability (\(pr^{D}_{N,t}\)) is null.

\subsubsection{Distribution of demand}
\label{sec:org72c6531}


Considering previous assumptions, total demand of this economy (\(Y\)) is the sum of aggregate household consumption (\(C_{N}\)) and total firms' investment (\(I_{F}\)) which is the sum of individual firms investment decisions (\(I_{f}\)).
\begin{latex}
\begin{equation}
\label{Ch_super_EQ_GDP_D}
Y = C_{N} + \sum_{f}^{F} I_{f}
\end{equation}
\end{latex}
As usual in AB models, distribution of total demand depends on relative competitiveness.
Since there is no price diversity, we assume that firms relative competitiveness depends only on the level of unfilled demand (\(l_{f,t}\)), normalised to the whole sector’s weighted averages (\(\overline{l}_{f,t-1}\)):

\begin{latex}
\begin{equation}
E_{f,t} = -\beta \frac{l_{f}}{\overline{l}_{f,t-1}}
\end{equation}
\end{latex}
Following SILVERBERG E DOSI, effective market-share is defined accordingly to a quasi-replicator mechanism (Equation ) in which firms that were not able to fulfill its demand level will have a lower market-share:
\begin{latex}
\begin{equation}
\label{Ch_super_EQ_Replicator}
ms_{f,t} = ms_{f,t-1}\cdot \left(1+\chi \frac{E_{f,t} - \overline{E}_{t}}{\overline{E}_{t}}\right)
\end{equation}
\end{latex}
in which \(\chi\) is a positive exogenous parameter and \(\overline{E}_{t}\) is the average competitiveness of the whole sector:
\begin{latex}
\begin{equation}
\overline{E}_{t} = \sum_{f=1}^{F}E_{f,t}\cdot ms_{f,t-1}
\end{equation}
\end{latex}

As will be discussed in section \ref{sec:switching}, effective market-share depends both on expected mark-share and effective investment decision, each one explained separately.
Thus, investment emergence patterns depends on how firms adapts its expectations and changes (or not) its investment functions.

\subsection{Credit and financial positions}
\label{sec:banking}
\subsubsection{Firms}
\label{sec:org4a8ccf4}
\paragraph*{Credit Demand}
\label{sec:org2a4b155}

In order to produce, firms demand credit (\(L_{f}^{D}\)) whenever retained profits -- hold as deposits (\(M_{f}\) -- are not enough to match its expenses (investment and wage bill):

\begin{latex}
\begin{equation}
\Delta L^{D}_{f} = \max [0, p_{f,t}I_{f,t} + W_{f,t} - M_{f,t}]
\end{equation}
\end{latex}
\paragraph*{Credit Supply}
\label{sec:orgb592292}

Banking credit supply for firms follows the procedures described in \textcite{reissl_2020_Minsky,pedrosa_2021_What} in which evaluates each firm probability to default (\(pr^{D}_{f,t}\)) accordingly to a logist function:

\begin{latex}
\begin{equation}
\label{Ch_super_EQ_prDefault_firm}
pr^{D}_{f,t} = \frac{1}{1 + \exp\left( \rho_{1}\frac{\Pi^{e}_{f,t}}{DS_{f,t}} - \rho_{2}\Lambda_{f,t-1} \right)}
\end{equation}
\end{latex}
where \(\rho_{1}\) and \(\rho_{2}\) are fixed parameters, \(\Pi^{e}_{f}\) is the expected operating cash flow, \(DS_{f,t}\) is the debt-servicing while \(\Lambda_{f,t-1}\) is the firm leverage.
The economic intuition present in Equation \ref{Ch_super_EQ_prDefault_firm} it that banks evaluate firms probability to default based on the expected present value of each firm's loan project\footnote{In order to keep the model as simple as possible, we assume that banking expectational rule assumes the naïve rule in all scenario. Thus, we ensure that only firms expectational heterogeinity affects the results. Additionally, \textcite{reissl_2021_Heterogeneous} -- who we refer for further details --  found that more complex heuristic rules in the banking sector does not change the model results qualitatively.}.

Then, considering a non-null probability of default of firms, fixed loans duration and assuming no interest rate change, banks estimate the expected return of each loan project (\(L^{r}_{f,t}\)) as follows:
\begin{latex}
\begin{equation}
L^{r}_{f,t} = \ldots
\end{equation}
\end{latex}

Banks also charges loans in a firm-specific manner by defining spread (\(\theta_{B,f_{t}}\)) based on firm's debt-servicing to operating cash-flow ratio as in \textcite{pedrosa_2021_What,reissl_2020_Minsky},
\begin{latex}
\begin{equation}
\theta_{B,f_{t}} = \mu_{f}\frac{DS_{f,t-1}}{\Pi_{f,t}}
\end{equation}
\end{latex}
in which \(\mu_{f}\) is a exogenous parameter set equally across firms and measure banks' sensibility to firms' leverage.

\paragraph*{Profits and dividends}
\label{sec:org3b1ba89}

As usual, firms' gross profit (\(\Pi_{f,t}\)) -- which we also refer as operating cash flow -- is defined as the total nominal sales (\(p_{f}S_{f}\)) net of wage bill (\(W_{f}\)):

\begin{latex}
\begin{equation}
\Pi_{f,t} = p_{f,t}\cdot S_{f,t} - W_{f,t}
\end{equation}
\end{latex}
Considering our simplifying assumptions and following the steps described in \textcite{pedrosa_2021_What}, firms' net profit (\(\Pi^{n}_{f}\)) is:

\begin{latex}
\begin{equation}
\Pi^{n}_{f} = \ldots
\end{equation}
\end{latex}

As in \textcite{pedrosa_2021_What}, we also follow \textcite{reissl_2020_Minsky} to define firms' dividend-payout ratio (\(\eta_{f}\)) which is a decreasing logistic function of debt-servicing to operating cash-flow ratio:
\begin{latex}
\begin{equation}
\eta_{f,t} = \frac{\eta_{0}}{1+\exp\left(\epsilon\frac{DS_{f,t}}{\Pi_{f,t}}\right)}
\end{equation}
\end{latex}
where \(\eta_{0}\) specifies the maximum dividend payout ratio while \(\epsilon\) is a fixed parameter equally defined for all firms.
Thus, firms distribute a \(\eta_{f}\) share of its net profit to households in form of dividends (\(FD\)):
\begin{latex}
\begin{equation}
FD_{t} = \max [0,\eta_{f,t}\Pi_{f,t}^{n}]
\end{equation}
\end{latex}

\subsubsection{Household}
\label{sec:orgb70dc65}

\paragraph*{Credit Demand}
\label{sec:org46be8bb}

In this model, we assume that household consumption has a autonomous component financed by credit or financial wealth -- hold as deposits (\(M_{h}\)) -- , thus household credit demand (\(L^{D}_{h}\)) is:

\begin{latex}
\begin{equation}
\Delta L^{D}_{h} = \max [0, Z_{t} - M_{h,t-1}]
\end{equation}
\end{latex}

\paragraph*{Credit Supply}
\label{sec:org175401c}

For simplicity, we assume no credit restriction to households.
Thus, autonomous demand is always financed by banks.
This simplifying hypothesis is equivalent to a null household probability to default (\(pr^{D}_{h,t}\)) assumed by banks:

\begin{latex}
\begin{equation}
pr^{D}_{h,t} = 0
\end{equation}
\end{latex}
Besides the absence of credit restriction to households, we assume that banks charges an spread on intertest rates (\(\theta_{B,h_{t}}\)) accordingly to debt-servicing (\(DS_{h,t-1}\)) to disposable income ratio as follows:

\begin{latex}
\begin{equation}
\theta_{B_{h_{t}}} = \mu_{h}\frac{DS_{h,t-1}}{YD_{h,t-1}}
\end{equation}
\end{latex}
in which \(\mu_{h}\) is an exogenous parameter that captures banks sensibility to households' leverage.

\paragraph*{Disposable income and net wealth}
\label{sec:orgfce57e0}

Households disposable income (\(YD\)) is defined by the sum of total wages, firms' and banks' distributed profits (\(FD_{f}\) and \(FD_{b}\) respectively), interest rate on deposits (\(r\)) net of interest payment on consumption loans (\(rl_{h}\)):

\begin{latex}
\begin{equation}
YD_{t} = \sum_{f=1}^{F}\left(W_{f,t} + FD_{f,t}\right) + FD_{b} + r\cdot M_{h,t-1} - rl_{h}\cdot L_{h,t-1}
\end{equation}
\begin{equation}
rl_{h} = (1+\theta_{B,h_{t}})\cdot r_{t}
\end{equation}
\end{latex}
Thus, households net wealth (\(NW_{h}\)) is given by:
\begin{latex}
\begin{equation}
\Delta NW_{h} = YD - p_{f,t}\cdot C_{N}
\end{equation}
\end{latex}
Since there is no financial assets other than banking deposits in the model, there is no need to specify how household's allocate its wealth.
Consequently, households' demand for banking deposits is equal to its total wealth (\(V_{h}\)):

\begin{latex}
\begin{equation}
\Delta M_{h,t} = \Delta V_{h,t} = \max [0, NW_{h,t}]
\end{equation}
\end{latex}

\subsubsection{Banks' profits and dividends}
\label{sec:orgb6fbcfb}


Considering a fixed maturity duration, banks' gross profit (\(\Pi_{B}\)) is equivalent as the interest on loans net of deposits interest rate payment:

\begin{latex}
\begin{equation}
\Pi_{B,t} = \sum_{f=1}^{F} \left(\left(1+\theta_{B,f,t}\right)\cdot r_{t}\cdot L_{f,t-1}\right) - (M_{h,t-1} + M_{f,t-1})\cdot r_{t}
\end{equation}
\end{latex}
Next, banks distribute a fixed share (\(\eta_{B}\)) of its current operational cash-flow net of defaults on loans (\(Def\)) to households in the form of dividends (\(FD_{B}\)):

\begin{latex}
\begin{equation}
FD_{B,t} = \max [0, \eta_{B}\cdot(\Pi_{B,t} - Def)]
\end{equation}
\end{latex}
Consequently, banks' net worth (\(NW_{B}\)) is given by:
\begin{latex}
\begin{equation}
\Delta NW_{B,t} = (\Pi_{B,t} - FD_{B,t}) - Def_{t}
\end{equation}
\end{latex}

\subsection{Switching mechanism}
\label{sec:switching}
This section provides the description for both expectational and investment decisions switching mechanism.
In order to do so, we implement the same algorithm as \textcite{dosi_2020_RATIONAL,reissl_2021_Heterogeneous} which is inspired in AUTORES empirical work.
The idea of this mechanism is to evaluate if a expectational rule or an investment function dominates the others and which pattern emerges at the macroeconomic level.
Thus, Section \ref{sec:switching_invest} describe the expectational mechanism while Section \ref{sec:switching_invest} applies this same principle to investment decisions.

\subsubsection{Expectations}
\label{sec:switching_expec}
The expectational switching mechanism employed in this model is the same as \textcite{dosi_2020_RATIONAL,reissl_2021_Heterogeneous}.
Basically, firms alternates between expectational rules based on mean squared forecast errors (\(MSFE\)) values.
Thus, this ``Ecological Heuristics Expectational Rule'' (EHER) allows us to evaluate how chances at the firm level have macroeconomic consequences in terms of economic stability, long-term growth and survival conditions for each firm.
Considering the expectation of variable \(X\) (\(X^{e}\)), firms choose among the following alternatives rules:

\begin{description}
\item[{Naïve (\emph{naïve})}] \(X^{e}_{na\text{\"{i}}ve,t} = X_{t-1}\)
\item[{Adaptative (\emph{ada})}] \(X^{e}_{ada,t} = X^{e}_{t-1} + \phi_{ada}\cdot (X_{t-1} - X^{e}_{t-1})\)
\item[{Weak trend expectation (\emph{wtr})}] \(X^{e}_{wtr,t} = X_{t-1} + \phi_{wtr}\cdot (X_{t-1} - X_{t-2})\)
\item[{Strong trend expectation (\emph{str})}] \(X^{e}_{str,t} = X_{t-1} + \phi_{str}\cdot (X_{t-1} - X_{t-2})\)
\item[{Anchor and Adjustment (\emph{aa})}] \(X^{e}_{aa,t} = \phi_{aa}\cdot Anch + (1-\phi_{aa})\cdot X_{t-1} + (X_{t-1} - X_{t-2})\)
\end{description}

in which \(0 < \phi_{ada} < 1\), \(0 < \phi_{wtr} < \phi_{str}\) adjustment are parameters exgonously defined while \(Anch\) is expectational anchor which is the moving average of \(X\) as in \textcite{reissl_2021_Heterogeneous}.

At each period, firms compute it expectational variables and evaluate whether or not to change it accordingly to the last forecast error of \(X\) (\(U_{rule,t}, rule \in {na\text{\"i}ve}, ada, wtr, str, aa\)):
\begin{latex}
\begin{equation}
\label{Ch_super_EQ_LFE}
U_{rule,t} = - \left(\frac{X_{t-1} - X^{e}_{rule,t-1}}{X^{e}_{rule,t-1}}\right)^{2} + \eta\cdot U_{rule,t-1}
\end{equation}
\end{latex}
where \(0 \leq \eta \leq 1\) is a memory parameter which measures weight of past errors.
As in \textcite{dosi_2020_RATIONAL}, firms update the expectation rule with the probability \(n_{rule,t}\) in each period as follows:
\begin{latex}
\begin{equation}
\label{Ch_super_EQ_rule_prob}
n_{rule,t} = \delta\cdot n_{rule,t-1} + (1-\delta)\cdot \frac{\exp{\gamma\cdot U_{rule,t}}}{\sum_{rule}^{RULE}\exp{\gamma\cdot U_{rule,t}}}
\end{equation}
\end{latex}
with \(\gamma \geq 0, \delta \leq 1\).
The rationale behind Equation \ref{Ch_super_EQ_rule_prob} is that the probability to change the expecational rule depends on the persistence of the currently employed rule (\(\delta\)) and on the impact of the past performance (\(\gamma\)).

Thus, as discussed before, this expecational switching mechanism allows us to explore the consequences of heterogenoeus firms computing different market-share expectations.
In terms of the implementation of a microfounded Sraffian supermultiplier model, this rather simple procedure triggers different investment expenditures even though firms decide to invest using the same functional specification.
Formally,


\begin{latex}
\begin{equation}
I_{f,t} = h_{f,t} \cdot \left(ms^{e}_{rule,f,t} \sum_{f=1}^{F}Y_{f,t}\right)
\end{equation}
\end{latex}
which is firm-level equivalent to the standard Sraffian supermultiplier model with only one firm (\(ms^{e}_{F} = ms_{F} = 1\)).
Next, on Section REF, this microeconomic specification will compared with the only-one-firm (oof) contrafactual.
Before moving to the model's validation, the next subsection will present the switching mechanism regarding investment decions.

\subsubsection{Investment decisions}
\label{sec:switching_invest}
Similarly to the previous subsection, firms follow some heuristic rules in order to choose the specification of the investment function.
The main divergence is that instead of computing the mean squared expectational forecast errors, firms evaluate its decision regarding unfilled demand.
The rationale behind this rule is that firms investment decision depends on the divergences between effective and normal capacity utilization rate in order to attend unexpected demand STEINDL.
Additionally, firms intend to achieve normal capacity utilization rate to reduce unnecessary costs as described by CICCONE.
Before moving further, it is important to note that there is no consensus in the demand-led macroeconomic growth literature if normal capacity utilization is achieved\footnote{For a discussion about this, see REF}.
However, it is unclear what is the macroeconomic emergence of different firm-level strategies regarding to reduce the discrepancies between effective and normal capacity utilization rate.

The switching mechanism present in this subsection is relevant because it allows us to explore some opened questions:
    (i) the aggregate investment function is a mirror of firm-level behavior or there are any properties that emerges?
    (ii) is there a dominant investment decision strategy?
    (iii) what are the consequences regarding desired capacity utilization rate in the presence of heterogeneous firms?
In order to answer them, we implement the following investment decisions functions inspired by the current demand-led macroeconomic growth literature:

\begin{description}
\item[{Standard neo-Kaleckian  (\emph{NK})}] \(I_{NK,t} = \left(\overline{\beta}_{0} + \beta_{1}(u - u_{N})\right)\cdot K_{f,t-1}\)
\item[{neo-Kaleckian supermultiplier (\emph{KSM})}] \(I_{KSM,t} = \left(\beta'_{0,t} + \beta_{1}(u - u_{N})\right)\cdot K_{f,t-1}\)
\item[{Sraffian supermultiplier (\emph{SSM})}] \(I_{SSM,t} = h_{f,t}\cdot \left(ms^{e}_{t}\cdot \sum_{f=1}^{F}Y_{f}\right)\)
\end{description}
where \(\overline{\beta}_{0}\) is investment autonomous component which represents animals spirits, \(\beta_{1}\) is investment induced component, \(h_{f,t}\) is the marginal propensity to invest which evolves accordingly to discrepancies between effective and normal capacity utilization rate \cite{serrano_1995_Long,serrano_2017_Sraffian}:
\begin{latex}
\begin{equation}
\Delta h_{f,t} = \beta_{u}(u_{t} - u_{N})\cdot h_{f,t-1}
\end{equation}
\end{latex}
in which \(\beta_{u}\) is an adjustment parameter while \(\beta'_{0}\) is flexible autonomous component proposed by \textcite{allain_2015_Tackling}.
Adapting it in order do express commom elements across alternatives:
\begin{latex}
\begin{equation}
\Delta \beta'_{0,t} = \beta_{u}\cdot\beta_{1}(u - u_{N})\cdot \beta'_{0,t-1}
\end{equation}
\end{latex}


At each period, firms revise whether or not to change the current investment function.
This procedure is based on the level of unfilled demand which is updated similarly to expectational performance (\(U^{D}_{inv,t}, inv \in [NK, KSM, SSM]\)):
\begin{latex}
\begin{equation}
U^{D}_{inv,t} = - (l_{f,t-1})^{2} + \eta_{I}\cdot U^{D}_{inv,t-1}
\end{equation}
\end{latex}
where \(\eta_{I}\) is a memory parameter as in Equation \ref{Ch_super_EQ_LFE}.
Additionally, an alternative investment function is choosen with the probability \(n_{inv,t}\):


\begin{latex}
\begin{equation}
\label{Ch_super_EQ_inv_prob}
n_{inv,t} = \delta_{I}\cdot n_{inv,t-1} + (1-\delta_{I})\cdot \frac{\exp{\gamma_{I}\cdot U_{inv,t}}}{\sum_{inv}^{INV}\exp{\gamma_{I}\cdot U_{inv,t}}}
\end{equation}
\end{latex}
in which parameters \(\delta_{I}, \gamma_{I}\) have the same meaning as in Equation \ref{Ch_super_EQ_rule_prob}.

\subsection{Aggregating and closing the model}
\label{sec:org3fa7cc2}

\subsubsection{Entry and exit of firms}
\label{sec:org53dfe02}
\subsubsection{Closing the accounting}
\label{sec:org647d766}


\section{Validation}
\label{sec:validation:ch_super}
\section{Experiments}
\label{sec:experiments:ch_super}
In the following subsections, we present the results of the model experiments in which expectational and investment switching mechanisms take place.
Table \ref{Tab_exp:ch_super} show each experiment design as well as the baseline scenario already simulated in Section \ref{validation:ch_super}.
Subsection \ref{sec:exp_expec:ch_super} reports the results of the expectational switching model in which only changes regarding expections rules are allowed while investment function is the microeconomic equivalent of Standard Sraffian supermultiplier model.
Next, on Subsection \ref{sec:exp_inv:ch_super}, investment function will change accordingly to each firm performance regarding unfilled demand levels while expections will follow an adaptative heuristic as in the baseline scenario.
Finally, the combination both mechanisms is evaluated in Section \ref{sec:exp_full:ch_super}.

Each model setting is simulated for 200 periods after the transience (which takes XXXX periods) while the results are computed using 100 Monte Carlo simulations runs.
We use baseline scenario in which there is only one firm investing accordingly to standard Sraffian supermultiplier model as a contrafactual in order to inspect the consequences of each modification.
Before moving further, it is important to note that our calibration procedure mainly intended to be as close as possible to the baseline scenario,
This approach provides us a sound basis to compare the actual effects of each switching mechanisms.
All experiments will be examinated accordingly to its capacity to replicate the stylized facts discussed in Section \ref{empirical:ch_super}.
Additionally, we will use parsimony as a tiebreaker, that is, if two models replicate the same set of stylized facts, the one with the simplest/most usual heuristic rule will be considered the most representative to describe the aggregate investment\footnote{In the case of expectations, we consider naïve and \(ada\) rule as the most usual while the firm-level Sraffian supermultiplier specification as the most parsimonious one considering the objectives of the paper.}.


\begin{table*}\centering
\caption{Experiments dictionaty}
\label{Tab_exp:ch_super}
\resizebox{\textwidth}{!}{%
\begin{center}
\begin{tabular}{rllc}
\hline
\textbf{Scenario} & \textbf{Expectations} & \textbf{Investment function} & \textbf{Number of firms}\\
\hline
Baseline & Adaptative (\emph{ada}) & Standard Sraffian supermultiplier & 1\\
Expectational switching & \(rule \in [\text{naïve}, ada, wrt, srt, aa]\) & Firm-level Sraffian supermultiplier & \(F\)\\
Investment switching & Adaptative (\emph{ada}) & \(inv \in [NK, KSM, SSM]\) & \(F\)\\
Full switching & \(rule \in [\text{naïve}, ada, wrt, srt, aa]\) & \(inv \in [NK, KSM, SSM]\) & \(F\)\\
\hline
\end{tabular}
\end{center}
%
}
\caption*{\textbf{Source:} Authors' elaboration}
\end{table*}

\subsection{Expectational switching}
\label{sec:exp_expec:ch_super}


\subsection{Investment switching}
\label{sec:exp_inv:ch_super}

\subsection{Full switching}
\label{sec:exp_full:ch_super}

\section{Concluding remarks}
\label{sec:conclusion:ch_super}

\section{Acknowledgments}
\label{sec:orgf9347af}

Agradecimentos



\printbibliography


\appendix
\section{Appendix}
\label{sec:org96b7097}
\label{Ch_super_appen:A}

\subsection{Tables}
\label{sec:org6d10d99}

\include{./tabs/Balance_Sheet.tex}
\include{./tabs/Transaction_FoF.tex}


\subsection{Calibration}
\label{sec:org24f8f59}

\subsection{Robustness check}
\label{sec:org2881278}
\end{document}
